<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FunSearch - Find Cool Stuff!</title>
    
    <!-- SEO Meta Tags for Google Optimization -->
    <meta name="description" content="FunSearch is a safe search tool for young explorers to find fun and educational content about coding frameworks.">
    <meta name="keywords" content="fun search, coding for kids, programming frameworks, learn coding, web development">
    <meta name="robots" content="index, follow">
    <link rel="sitemap" href="/sitemap">
    
    <!-- Font Awesome 7.0.1 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Child-Friendly Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B6B',
                        secondary: '#4ECDC4',
                        accent: '#FFD166',
                        light: '#F7FFF7',
                        dark: '#292F36'
                    },
                    fontFamily: {
                        comic: ['"Comic Neue"', 'cursive'],
                        nunito: ['Nunito', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bounce-effect {
                transition: transform 0.3s ease;
            }
            .bounce-effect:hover {
                transform: translateY(-5px);
            }
            .search-glow {
                box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
            }
        }
    </style>
</head>
<body class="bg-light dark:bg-dark text-gray-800 dark:text-gray-200 min-h-screen flex flex-col transition-colors duration-300">
    <!-- Navigation Bar -->
    <header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50 transition-colors duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- Logo -->
            <a href="/" class="flex items-center space-x-2">
                <i class="fa fa-search text-primary dark:text-accent text-2xl"></i>
                <span class="font-comic font-bold text-xl md:text-2xl text-primary dark:text-accent">FunSearch</span>
            </a>
            
            <!-- Navigation Icons -->
            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa fa-sun text-accent dark:hidden"></i>
                    <i class="fa fa-moon text-accent hidden dark:block"></i>
                </button>
                <button id="bookmarkBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa fa-star-o text-primary dark:text-primary"></i>
                </button>
                <button id="shareBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fa fa-share-alt text-secondary dark:text-secondary"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Breadcrumb Navigation -->
    <nav class="container mx-auto px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
        <ul class="flex flex-wrap items-center space-x-2">
            <li><a href="/" class="hover:text-primary dark:hover:text-accent transition-colors">Home</a></li>
            <li><i class="fa fa-chevron-right text-xs text-gray-400"></i></li>
            <li><a href="/free" class="hover:text-primary dark:hover:text-accent transition-colors">Free Stuff</a></li>
            <li><i class="fa fa-chevron-right text-xs text-gray-400"></i></li>
            <li class="text-primary dark:text-accent">Coding Frameworks</li>
        </ul>
    </nav>
    
    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Search Section -->
        <section class="max-w-3xl mx-auto mb-12">
            <h1 class="font-comic text-[clamp(1.8rem,5vw,3rem)] text-center font-bold mb-6 text-gray-800 dark:text-white">
                Find Cool Coding Tools!
            </h1>
            
            <div class="relative">
                <form id="searchForm" class="relative">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="Search for coding frameworks..." 
                        autocomplete="off"
                        class="w-full py-4 px-6 pr-14 rounded-full border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-800 dark:text-white font-nunito text-lg focus:outline-none focus:ring-4 focus:ring-secondary/30 dark:focus:ring-accent/30 transition-all search-glow"
                    >
                    <button type="submit" class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-primary dark:bg-accent text-white p-2 rounded-full hover:bg-primary/90 dark:hover:bg-accent/90 transition-colors bounce-effect">
                        <i class="fa fa-search text-lg"></i>
                    </button>
                </form>
                
                <!-- Search Suggestions -->
                <div id="searchSuggestions" class="hidden absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-10 border border-gray-200 dark:border-gray-700">
                    <ul id="suggestionsList" class="divide-y divide-gray-200 dark:divide-gray-700">
                        <!-- Suggestions will be populated by JavaScript -->
                    </ul>
                </div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-3 mt-6">
                <span class="text-gray-600 dark:text-gray-400 font-nunito">Try searching for:</span>
                <button class="search-tag bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors">React</button>
                <button class="search-tag bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 px-3 py-1 rounded-full text-sm hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors">Vue</button>
                <button class="search-tag bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-3 py-1 rounded-full text-sm hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors">JavaScript</button>
                <button class="search-tag bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 px-3 py-1 rounded-full text-sm hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors">Frontend</button>
            </div>
        </section>
        
        <!-- Search Results -->
        <section class="max-w-4xl mx-auto">
            <h2 class="font-comic text-2xl font-bold mb-6 text-gray-800 dark:text-white hidden" id="resultsHeading">
                Results for: <span id="searchTerm" class="text-primary dark:text-accent"></span>
            </h2>
            
            <div id="resultsContainer" class="space-y-6">
                <!-- Results will be populated by JavaScript -->
                <div class="flex justify-center items-center h-60">
                    <div class="text-center">
                        <div class="inline-block bg-white dark:bg-gray-800 p-6 rounded-full shadow-lg mb-4 bounce-effect">
                            <i class="fa fa-code text-5xl text-secondary dark:text-accent"></i>
                        </div>
                        <p class="font-comic text-xl text-gray-600 dark:text-gray-400">Search for coding frameworks!</p>
                        <p class="text-gray-500 dark:text-gray-500 mt-2">Find cool tools for building websites and apps</p>
                    </div>
                </div>
            </div>
            
            <!-- Pagination -->
            <div id="pagination" class="mt-10 flex justify-center hidden">
                <button id="prevPage" class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-l-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-4 py-2 bg-white dark:bg-gray-800 border-t border-b border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors page-btn active bg-secondary/10 dark:bg-accent/20">1</button>
                <button id="nextPage" class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-r-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-chevron-right"></i>
                </button>
            </div>
        </section>
    </main>
    
    <!-- Newsletter Section -->
    <section class="bg-secondary/10 dark:bg-secondary/20 py-10 mt-12 transition-colors duration-300">
        <div class="container mx-auto px-4 max-w-3xl">
            <h2 class="font-comic text-2xl font-bold mb-2 text-center text-gray-800 dark:text-white">Want Cool Coding Updates?</h2>
            <p class="text-center text-gray-600 dark:text-gray-300 mb-6 font-nunito">Get fun coding ideas sent right to you!</p>
            
            <form class="flex flex-col sm:flex-row gap-3 max-w-lg mx-auto">
                <input 
                    type="email" 
                    id="subscribeEmail" 
                    placeholder="Your email address" 
                    class="flex-grow px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-secondary dark:focus:ring-accent"
                    required
                >
                <button 
                    type="button" 
                    id="subscribeBtn" 
                    class="bg-primary dark:bg-accent text-white px-6 py-3 rounded-lg font-bold hover:bg-primary/90 dark:hover:bg-accent/90 transition-colors bounce-effect"
                >
                    Sign Up
                </button>
            </form>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-900 py-8 transition-colors duration-300">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0 text-center md:text-left">
                    <a href="/" class="flex items-center justify-center md:justify-start space-x-2">
                        <i class="fa fa-search text-primary dark:text-accent"></i>
                        <span class="font-comic font-bold text-lg text-primary dark:text-accent">FunSearch</span>
                    </a>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 font-nunito max-w-xs">Discover cool coding tools in a fun way</p>
                </div>
                
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-3">
                    <a href="/sitemap" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-sitemap mr-1"></i> Sitemap
                    </a>
                    <a href="/safety" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-shield mr-1"></i> Safety
                    </a>
                    <a href="/about" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-info-circle mr-1"></i> About
                    </a>
                </div>
            </div>
            
            <div class="border-t border-gray-200 dark:border-gray-800 mt-6 pt-6 text-center text-sm text-gray-600 dark:text-gray-400 font-nunito">
                &copy; 2023 FunSearch. All rights reserved.
            </div>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script type="module">
        // DOM Elements
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const searchSuggestions = document.getElementById('searchSuggestions');
        const suggestionsList = document.getElementById('suggestionsList');
        const resultsContainer = document.getElementById('resultsContainer');
        const resultsHeading = document.getElementById('resultsHeading');
        const searchTerm = document.getElementById('searchTerm');
        const pagination = document.getElementById('pagination');
        const searchTags = document.querySelectorAll('.search-tag');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        
        // Pagination variables
        let currentPage = 1;
        const resultsPerPage = 30;
        let allResults = [];
        let frameworkData = [];
        let frameworkSuggestions = [];
        let isDataLoaded = false;
        
        // Load data from JSON file when the page loads
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/assets/data/data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                frameworkData = await response.json();
                
                // Create suggestions from loaded data
                frameworkSuggestions = [
                    ...frameworkData.map(item => item.name.toLowerCase()),
                    ...frameworkData.map(item => item.category.toLowerCase()),
                    ...[].concat(...frameworkData.map(item => item.tags.map(tag => tag.toLowerCase())))
                ].filter((value, index, self) => self.indexOf(value) === index); // Remove duplicates
                
                isDataLoaded = true;
            } catch (error) {
                console.error('Failed to load data:', error);
                // Do not provide any fallback data, show an error message instead
                isDataLoaded = false;
            }
        });
        
        // Handle search input for suggestions
        searchInput.addEventListener('input', (e) => {
            const value = e.target.value.toLowerCase().trim();
            
            if (!isDataLoaded) {
                // Don't show suggestions until data is loaded
                searchSuggestions.classList.add('hidden');
                return;
            }
            
            if (value.length > 0) {
                // Filter suggestions based on input
                const filteredSuggestions = frameworkSuggestions.filter(item => 
                    item.toLowerCase().includes(value)
                );
                
                // Show suggestions if any match
                if (filteredSuggestions.length > 0) {
                    displaySuggestions(filteredSuggestions);
                    searchSuggestions.classList.remove('hidden');
                } else {
                    searchSuggestions.classList.add('hidden');
                }
            } else {
                searchSuggestions.classList.add('hidden');
            }
        });
        
        // Close suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
                searchSuggestions.classList.add('hidden');
            }
        });
        
        // Display search suggestions
        function displaySuggestions(suggestions) {
            suggestionsList.innerHTML = '';
            
            suggestions.forEach(suggestion => {
                const li = document.createElement('li');
                li.className = 'px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors';
                li.textContent = suggestion.charAt(0).toUpperCase() + suggestion.slice(1);
                
                li.addEventListener('click', () => {
                    searchInput.value = suggestion.charAt(0).toUpperCase() + suggestion.slice(1);
                    searchSuggestions.classList.add('hidden');
                });
                
                suggestionsList.appendChild(li);
            });
        }
        
        // Handle search form submission
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const query = searchInput.value.trim();
            
            if (query) {
                currentPage = 1; // Reset to first page on new search
                searchTerm.textContent = query;
                resultsHeading.classList.remove('hidden');
                searchSuggestions.classList.add('hidden');
                
                // Show loading state
                resultsContainer.innerHTML = `
                    <div class="flex justify-center items-center h-60">
                        <div class="text-center">
                            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-secondary dark:border-accent mb-4"></div>
                            <p class="font-comic text-lg text-gray-600 dark:text-gray-400">Searching for "${query}"...</p>
                            <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Finding cool coding tools for you!</p>
                        </div>
                    </div>
                `;
                
                // Check if data is loaded
                if (!isDataLoaded) {
                    // Try to wait for data to load
                    const checkDataInterval = setInterval(() => {
                        if (isDataLoaded) {
                            clearInterval(checkDataInterval);
                            performSearch(query);
                        }
                    }, 100);
                    
                    // Timeout after 3 seconds
                    setTimeout(() => {
                        clearInterval(checkDataInterval);
                        resultsContainer.innerHTML = `
                            <div class="flex justify-center items-center h-60">
                                <div class="text-center">
                                    <div class="inline-block bg-white dark:bg-gray-800 p-4 rounded-full shadow-md mb-4">
                                        <i class="fa fa-exclamation-circle text-3xl text-red-500"></i>
                                    </div>
                                    <p class="font-comic text-lg text-gray-600 dark:text-gray-400">Failed to load data</p>
                                    <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Please try again later</p>
                                </div>
                            </div>
                        `;
                    }, 3000);
                } else {
                    performSearch(query);
                }
            }
        });
        
        // Helper function to perform search
        function performSearch(query) {
            // Filter data based on search query
            allResults = frameworkData.filter(item => 
                item.name.toLowerCase().includes(query.toLowerCase()) || 
                item.category.toLowerCase().includes(query.toLowerCase()) ||
                item.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase()))
            );
            
            // Display paginated results
            displayPaginatedResults();
            
            // Update pagination
            updatePagination();
        }
        
        // Display paginated results
        function displayPaginatedResults() {
            const startIndex = (currentPage - 1) * resultsPerPage;
            const endIndex = startIndex + resultsPerPage;
            const currentResults = allResults.slice(startIndex, endIndex);
            
            if (allResults.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="flex justify-center items-center h-60">
                        <div class="text-center">
                            <div class="inline-block bg-white dark:bg-gray-800 p-4 rounded-full shadow-md mb-4">
                                <i class="fa fa-search text-3xl text-gray-400"></i>
                            </div>
                            <p class="font-comic text-lg text-gray-600 dark:text-gray-400">No results for "${searchInput.value}"</p>
                            <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Try searching for something else!</p>
                        </div>
                    </div>
                `;
                pagination.classList.add('hidden');
                return;
            }
            
            resultsContainer.innerHTML = '';
            
            currentResults.forEach(item => {
                const resultCard = document.createElement('div');
                resultCard.className = 'bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 bounce-effect';
                
                // Generate a color based on ID for visual distinction
                const colors = [
                    'bg-blue-100 dark:bg-blue-900/30',
                    'bg-green-100 dark:bg-green-900/30',
                    'bg-purple-100 dark:bg-purple-900/30',
                    'bg-yellow-100 dark:bg-yellow-900/30',
                    'bg-red-100 dark:bg-red-900/30'
                ];
                const colorIndex = (item.id - 1) % colors.length;
                
                resultCard.innerHTML = `
                    <div class="md:flex">
                        <div class="md:w-1/4 ${colors[colorIndex]} flex items-center justify-center p-6">
                            <div class="text-center">
                                <i class="fa fa-code text-5xl text-gray-700 dark:text-gray-300"></i>
                                <div class="mt-3 flex">
                                    ${Array(Math.ceil(item.popularity * 5)).fill().map(() => 
                                        '<i class="fa fa-star text-yellow-500"></i>'
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                        <div class="p-5 md:w-3/4">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-comic text-xl font-bold text-gray-800 dark:text-white">${item.name}</h3>
                                <button id="bookmarkBtn" class="text-gray-400 hover:text-primary transition-colors">
                                    <i class="fa fa-star-o"></i>
                                </button>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 font-nunito mb-3">Category: ${item.category}</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${item.tags.map(tag => 
                                    `<span class="text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full text-gray-600 dark:text-gray-300">${tag}</span>`
                                ).join('')}
                            </div>
                            <div class="flex justify-between items-center">
                                <a href="/${item.file}" class="text-secondary dark:text-accent hover:underline font-medium flex items-center">
                                    Learn More <i class="fa fa-arrow-right ml-1"></i>
                                </a>
                                <button id="shareBtn" class="text-gray-400 hover:text-secondary dark:hover:text-accent transition-colors">
                                    <i class="fa fa-share-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(resultCard);
            });
        }
        
        // Update pagination controls
        function updatePagination() {
            const totalPages = Math.ceil(allResults.length / resultsPerPage);
            
            if (totalPages <= 1) {
                pagination.classList.add('hidden');
                return;
            }
            
            pagination.classList.remove('hidden');
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;
        }
        
        // Pagination event listeners
        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                displayPaginatedResults();
                updatePagination();
                scrollToResults();
            }
        });
        
        nextPageBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(allResults.length / resultsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                displayPaginatedResults();
                updatePagination();
                scrollToResults();
            }
        });
        
        // Scroll to results after pagination change
        function scrollToResults() {
            resultsHeading.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // Handle search tags
        searchTags.forEach(tag => {
            tag.addEventListener('click', () => {
                searchInput.value = tag.textContent;
                searchForm.dispatchEvent(new Event('submit'));
            });
        });
        
        // Initialize theme based on user preference
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    
    <!-- External main.js -->
    <!-- <script type="module" src="/main.js"></script> -->
</body>
</html>