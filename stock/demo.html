<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Finnhub API Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { margin-top: 30px; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 5px; max-height: 300px; overflow: auto; }
    button { margin: 5px 0; padding: 5px 10px; }
  </style>
</head>
<body>
  <h1>Finnhub API Demo</h1>

  <div>
    <h2>1. 实时行情 /quote</h2>
    <input type="text" id="symbolQuote" placeholder="输入股票代码, e.g. AAPL" />
    <button onclick="getQuote()">获取行情</button>
    <pre id="quoteResult">结果会显示在这里</pre>
  </div>

  <div>
    <h2>2. K 线数据 /stock/candle</h2>
    <input type="text" id="symbolCandle" placeholder="股票代码, e.g. AAPL" />
    <button onclick="getCandle()">获取 K 线</button>
    <pre id="candleResult">结果会显示在这里</pre>
  </div>

  <div>
    <h2>3. 公司信息 /stock/profile2</h2>
    <input type="text" id="symbolProfile" placeholder="股票代码, e.g. AAPL" />
    <button onclick="getProfile()">获取公司信息</button>
    <pre id="profileResult">结果会显示在这里</pre>
  </div>

  <script>
    const apiKey = "d3f5j7hr01qh40fgv4q0d3f5j7hr01qh40fgv4qg"; // 你的 Finnhub API Key

    async function getQuote() {
      const symbol = document.getElementById("symbolQuote").value.toUpperCase();
      const res = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`);
      const data = await res.json();
      document.getElementById("quoteResult").textContent = JSON.stringify(data, null, 2);
    }

    async function getCandle() {
      const symbol = document.getElementById("symbolCandle").value.toUpperCase();
      // 默认获取日线过去 30 天
      const now = Math.floor(Date.now() / 1000);
      const from = now - 30*24*3600;
      const res = await fetch(`https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${from}&to=${now}&token=${apiKey}`);
      const data = await res.json();
      document.getElementById("candleResult").textContent = JSON.stringify(data, null, 2);
    }

    async function getProfile() {
      const symbol = document.getElementById("symbolProfile").value.toUpperCase();
      const res = await fetch(`https://finnhub.io/api/v1/stock/profile2?symbol=${symbol}&token=${apiKey}`);
      const data = await res.json();
      document.getElementById("profileResult").textContent = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>