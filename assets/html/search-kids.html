<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Kids Search - Explore Cool Stuff!</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="A super fun and safe search tool for kids to explore amazing coding tools and learn about technology in a playful way!">
    <meta name="keywords" content="kids search, coding for kids, learn technology, fun education, safe search">
    <meta name="robots" content="index, follow">
    <link rel="sitemap" href="/sitemap">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Child-Friendly Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&family=Comic+Neue:wght@400;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B6B',
                        secondary: '#4ECDC4',
                        accent: '#FFD166',
                        success: '#06D6A0',
                        danger: '#EF476F',
                        info: '#118AB2',
                        light: '#F7FFF7',
                        dark: '#292F36'
                    },
                    fontFamily: {
                        bubblegum: ['"Bubblegum Sans"', 'cursive'],
                        comic: ['"Comic Neue"', 'cursive'],
                        nunito: ['Nunito', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bounce-effect {
                transition: transform 0.3s ease;
            }
            .bounce-effect:hover {
                transform: translateY(-5px);
            }
            .search-glow {
                box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
            }
            .wiggle {
                animation: wiggle 1s ease-in-out infinite;
            }
            @keyframes wiggle {
                0%, 100% { transform: rotate(-2deg); }
                50% { transform: rotate(2deg); }
            }
            .float {
                animation: float 3s ease-in-out infinite;
            }
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
            .bg-gradient-fun {
                background-image: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
            }
        }
    </style>
</head>
<body class="bg-light dark:bg-dark text-gray-800 dark:text-gray-200 min-h-screen flex flex-col transition-colors duration-300">
    <!-- Navigation Bar with Fun Elements -->
    <header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50 transition-colors duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <!-- Logo -->
            <a href="/" class="flex items-center space-x-2">
                <div class="relative">
                    <i class="fa fa-search text-primary dark:text-accent text-2xl wiggle"></i>
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-accent dark:bg-primary rounded-full animate-pulse"></div>
                </div>
                <span class="font-bubblegum font-bold text-xl md:text-2xl text-primary dark:text-accent">KidzSearch</span>
            </a>
            
            <!-- Navigation Icons -->
            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors bounce-effect">
                    <i class="fa fa-sun text-accent dark:hidden"></i>
                    <i class="fa fa-moon text-accent hidden dark:block"></i>
                </button>
                <button id="bookmarkBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors bounce-effect">
                    <i class="fa fa-star text-primary dark:text-primary"></i>
                </button>
                <button id="shareBtn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors bounce-effect">
                    <i class="fa fa-share-alt text-secondary dark:text-secondary"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Decorative Clouds -->
    <div class="absolute top-20 left-10 opacity-50 hidden md:block">
        <i class="fa fa-cloud text-4xl text-white dark:text-gray-600 float"></i>
    </div>
    <div class="absolute top-40 right-20 opacity-50 hidden md:block">
        <i class="fa fa-cloud text-5xl text-white dark:text-gray-600 float" style="animation-delay: 1s;"></i>
    </div>
    
    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 relative z-10">
        <!-- Search Section with Fun Characters -->
        <section class="max-w-3xl mx-auto mb-12">
            <h1 class="font-bubblegum text-[clamp(2rem,6vw,3.5rem)] text-center font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
                Let's Explore Cool Stuff!
            </h1>
            <p class="text-center font-comic text-lg mb-8 text-gray-700 dark:text-gray-300">
                Search for awesome tools and learn new things! ðŸš€
            </p>
            
            <div class="relative">
                <form id="searchForm" class="relative">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="What do you want to learn about today?" 
                        autocomplete="off"
                        class="w-full py-5 px-6 pr-16 rounded-full border-2 border-accent dark:border-secondary bg-white dark:bg-gray-800 text-gray-800 dark:text-white font-nunito text-lg focus:outline-none focus:ring-4 focus:ring-secondary/30 dark:focus:ring-accent/30 transition-all search-glow"
                    >
                    <button type="submit" class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-gradient-fun text-white p-3 rounded-full hover:opacity-90 transition-colors bounce-effect">
                        <i class="fa fa-search text-xl"></i>
                    </button>
                </form>
                
                <!-- Search Suggestions -->
                <div id="searchSuggestions" class="hidden absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-10 border-2 border-accent dark:border-secondary">
                    <ul id="suggestionsList" class="divide-y divide-gray-200 dark:divide-gray-700">
                        <!-- Suggestions will be populated by JavaScript -->
                    </ul>
                </div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-3 mt-8">
                <span class="text-gray-600 dark:text-gray-400 font-comic">Try searching for:</span>
                <button class="search-tag bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-4 py-2 rounded-full text-sm font-bold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors bounce-effect">
                    <i class="fa fa-gamepad mr-1"></i> Games
                </button>
                <button class="search-tag bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 px-4 py-2 rounded-full text-sm font-bold hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors bounce-effect">
                    <i class="fa fa-paint-brush mr-1"></i> Art
                </button>
                <button class="search-tag bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-4 py-2 rounded-full text-sm font-bold hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors bounce-effect">
                    <i class="fa fa-robot mr-1"></i> Robots
                </button>
                <button class="search-tag bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 px-4 py-2 rounded-full text-sm font-bold hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors bounce-effect">
                    <i class="fa fa-rocket mr-1"></i> Space
                </button>
                <button class="search-tag bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 px-4 py-2 rounded-full text-sm font-bold hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors bounce-effect">
                    <i class="fa fa-drum mr-1"></i> Music
                </button>
            </div>
        </section>
        
        <!-- Search Results -->
        <section class="max-w-4xl mx-auto">
            <h2 class="font-bubblegum text-2xl font-bold mb-6 text-gray-800 dark:text-white hidden" id="resultsHeading">
                I found these cool things about: <span id="searchTerm" class="text-primary dark:text-accent"></span>
            </h2>
            
            <div id="resultsContainer" class="space-y-6">
                <!-- Results will be populated by JavaScript -->
                <div class="flex justify-center items-center h-60">
                    <div class="text-center">
                        <div class="inline-block bg-white dark:bg-gray-800 p-6 rounded-full shadow-lg mb-4 float">
                            <i class="fa fa-lightbulb text-5xl text-accent dark:text-secondary animate-pulse"></i>
                        </div>
                        <p class="font-comic text-xl text-gray-600 dark:text-gray-400">What do you want to explore today?</p>
                        <p class="text-gray-500 dark:text-gray-500 mt-2">Search for fun and educational tools!</p>
                    </div>
                </div>
            </div>
            
            <!-- Pagination with Fun Design -->
            <div id="pagination" class="mt-10 flex justify-center hidden">
                <button id="prevPage" class="px-4 py-2 bg-white dark:bg-gray-800 border-2 border-accent dark:border-secondary rounded-l-lg hover:bg-accent/10 dark:hover:bg-secondary/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-chevron-left"></i>
                </button>
                <button class="px-4 py-2 bg-white dark:bg-gray-800 border-t-2 border-b-2 border-accent dark:border-secondary hover:bg-accent/10 dark:hover:bg-secondary/20 transition-colors page-btn active bg-accent/10 dark:bg-secondary/20">1</button>
                <button id="nextPage" class="px-4 py-2 bg-white dark:bg-gray-800 border-2 border-accent dark:border-secondary rounded-r-lg hover:bg-accent/10 dark:hover:bg-secondary/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fa fa-chevron-right"></i>
                </button>
            </div>
        </section>
    </main>
    
    <!-- Fun Learning Tip Section -->
    <section class="bg-accent/10 dark:bg-secondary/20 py-10 mt-12 transition-colors duration-300">
        <div class="container mx-auto px-4 max-w-3xl">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="bg-white dark:bg-gray-800 p-5 rounded-full shadow-md wiggle">
                    <i class="fa fa-star text-4xl text-accent dark:text-secondary"></i>
                </div>
                <div>
                    <h2 class="font-bubblegum text-2xl font-bold mb-2 text-gray-800 dark:text-white">Fun Learning Tip!</h2>
                    <p class="text-gray-600 dark:text-gray-300 font-nunito">Did you know that coding can help you create your own games and animations? Keep exploring to learn more cool stuff!</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-900 py-8 transition-colors duration-300">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0 text-center md:text-left">
                    <a href="/" class="flex items-center justify-center md:justify-start space-x-2">
                        <i class="fa fa-search text-primary dark:text-accent"></i>
                        <span class="font-bubblegum font-bold text-lg text-primary dark:text-accent">KidzSearch</span>
                    </a>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 font-nunito max-w-xs">A safe place for kids to explore technology and have fun!</p>
                </div>
                
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-3">
                    <a href="/sitemap" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-map mr-1"></i> Map
                    </a>
                    <a href="/safety" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-shield-alt mr-1"></i> Safety
                    </a>
                    <a href="/about" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-accent transition-colors flex items-center">
                        <i class="fa fa-info-circle mr-1"></i> About
                    </a>
                </div>
            </div>
            
            <div class="border-t border-gray-200 dark:border-gray-800 mt-6 pt-6 text-center text-sm text-gray-600 dark:text-gray-400 font-nunito">
                &copy; 2023 KidzSearch. All rights reserved.
            </div>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script type="module">
        // DOM Elements
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const searchSuggestions = document.getElementById('searchSuggestions');
        const suggestionsList = document.getElementById('suggestionsList');
        const resultsContainer = document.getElementById('resultsContainer');
        const resultsHeading = document.getElementById('resultsHeading');
        const searchTerm = document.getElementById('searchTerm');
        const pagination = document.getElementById('pagination');
        const searchTags = document.querySelectorAll('.search-tag');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        
        // Pagination variables
        let currentPage = 1;
        const resultsPerPage = 20; // Fewer results per page for kids
        let allResults = [];
        let toolData = [];
        let searchSuggestionsList = [];
        let isDataLoaded = false;
        
        // Load data from JSON file when the page loads
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/assets/data/data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                toolData = await response.json();
                
                // Create suggestions from loaded data with kid-friendly keywords
                const kidFriendlyKeywords = [
                    'games', 'art', 'robot', 'music', 'space', 'animals', 'science', 
                    'math', 'fun', 'color', 'drawing', 'animation', 'story', 'puzzle'
                ];
                
                searchSuggestionsList = [
                    ...toolData.map(item => item.name.toLowerCase()),
                    ...toolData.map(item => item.category.toLowerCase()),
                    ...[].concat(...toolData.map(item => item.tags.map(tag => tag.toLowerCase()))),
                    ...kidFriendlyKeywords
                ].filter((value, index, self) => self.indexOf(value) === index); // Remove duplicates
                
                isDataLoaded = true;
            } catch (error) {
                console.error('Failed to load data:', error);
                isDataLoaded = false;
            }
        });
        
        // Handle search input for suggestions
        searchInput.addEventListener('input', (e) => {
            const value = e.target.value.toLowerCase().trim();
            
            if (!isDataLoaded) {
                searchSuggestions.classList.add('hidden');
                return;
            }
            
            if (value.length > 0) {
                // Filter suggestions based on input
                const filteredSuggestions = searchSuggestionsList.filter(item => 
                    item.toLowerCase().includes(value)
                );
                
                // Show suggestions if any match
                if (filteredSuggestions.length > 0) {
                    displaySuggestions(filteredSuggestions.slice(0, 8)); // Limit to 8 suggestions
                    searchSuggestions.classList.remove('hidden');
                } else {
                    searchSuggestions.classList.add('hidden');
                }
            } else {
                searchSuggestions.classList.add('hidden');
            }
        });
        
        // Close suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
                searchSuggestions.classList.add('hidden');
            }
        });
        
        // Display search suggestions with fun icons
        function displaySuggestions(suggestions) {
            suggestionsList.innerHTML = '';
            
            suggestions.forEach(suggestion => {
                // Assign fun icons based on suggestion text
                let icon = 'fa-star';
                if (suggestion.includes('game')) icon = 'fa-gamepad';
                else if (suggestion.includes('art') || suggestion.includes('color')) icon = 'fa-paint-brush';
                else if (suggestion.includes('robot')) icon = 'fa-robot';
                else if (suggestion.includes('music')) icon = 'fa-music';
                else if (suggestion.includes('space')) icon = 'fa-rocket';
                else if (suggestion.includes('animal')) icon = 'fa-paw';
                else if (suggestion.includes('science')) icon = 'fa-flask';
                else if (suggestion.includes('math')) icon = 'fa-calculator';
                else if (suggestion.includes('draw')) icon = 'fa-pencil-alt';
                else if (suggestion.includes('story')) icon = 'fa-book';
                
                const li = document.createElement('li');
                li.className = 'px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors';
                li.innerHTML = `
                    <div class="flex items-center">
                        <i class="fa ${icon} mr-2 text-accent dark:text-secondary"></i>
                        <span>${suggestion.charAt(0).toUpperCase() + suggestion.slice(1)}</span>
                    </div>
                `;
                
                li.addEventListener('click', () => {
                    searchInput.value = suggestion.charAt(0).toUpperCase() + suggestion.slice(1);
                    searchSuggestions.classList.add('hidden');
                });
                
                suggestionsList.appendChild(li);
            });
        }
        
        // Handle search form submission
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const query = searchInput.value.trim();
            
            if (query) {
                currentPage = 1; // Reset to first page on new search
                searchTerm.textContent = query;
                resultsHeading.classList.remove('hidden');
                searchSuggestions.classList.add('hidden');
                
                // Show loading state with fun animation
                resultsContainer.innerHTML = `
                    <div class="flex justify-center items-center h-60">
                        <div class="text-center">
                            <div class="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-accent dark:border-secondary mb-4"></div>
                            <p class="font-comic text-lg text-gray-600 dark:text-gray-400">Looking for "${query}"...</p>
                            <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Wait, I'm finding cool stuff for you!</p>
                        </div>
                    </div>
                `;
                
                // Check if data is loaded
                if (!isDataLoaded) {
                    // Try to wait for data to load
                    const checkDataInterval = setInterval(() => {
                        if (isDataLoaded) {
                            clearInterval(checkDataInterval);
                            performSearch(query);
                        }
                    }, 100);
                    
                    // Timeout after 3 seconds
                    setTimeout(() => {
                        clearInterval(checkDataInterval);
                        resultsContainer.innerHTML = `
                            <div class="flex justify-center items-center h-60">
                                <div class="text-center">
                                    <div class="inline-block bg-white dark:bg-gray-800 p-4 rounded-full shadow-md mb-4">
                                        <i class="fa fa-exclamation-circle text-3xl text-danger"></i>
                                    </div>
                                    <p class="font-comic text-lg text-gray-600 dark:text-gray-400">Oops! Couldn't load data</p>
                                    <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Please try again later</p>
                                </div>
                            </div>
                        `;
                    }, 3000);
                } else {
                    performSearch(query);
                }
            }
        });
        
        // Helper function to perform search
        function performSearch(query) {
            // Filter data based on search query
            allResults = toolData.filter(item => 
                item.name.toLowerCase().includes(query.toLowerCase()) || 
                item.category.toLowerCase().includes(query.toLowerCase()) ||
                item.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase()))
            );
            
            // Display paginated results
            displayPaginatedResults();
            
            // Update pagination
            updatePagination();
        }
        
        // Display paginated results with fun design
        function displayPaginatedResults() {
            const startIndex = (currentPage - 1) * resultsPerPage;
            const endIndex = startIndex + resultsPerPage;
            const currentResults = allResults.slice(startIndex, endIndex);
            
            if (allResults.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="flex justify-center items-center h-60">
                        <div class="text-center">
                            <div class="inline-block bg-white dark:bg-gray-800 p-4 rounded-full shadow-md mb-4">
                                <i class="fa fa-search text-3xl text-gray-400"></i>
                            </div>
                            <p class="font-comic text-lg text-gray-600 dark:text-gray-400">No results for "${searchInput.value}"</p>
                            <p class="text-gray-500 dark:text-gray-500 text-sm mt-2">Try searching for something else, like "games" or "art"!</p>
                        </div>
                    </div>
                `;
                pagination.classList.add('hidden');
                return;
            }
            
            resultsContainer.innerHTML = '';
            
            currentResults.forEach(item => {
                const resultCard = document.createElement('div');
                resultCard.className = 'bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 bounce-effect';
                
                // Generate fun icons and colors based on category or tags
                let cardIcon = 'fa-star';
                let cardColorClass = 'bg-blue-100 dark:bg-blue-900/30';
                
                if (item.tags.some(tag => tag.toLowerCase().includes('game'))) {
                    cardIcon = 'fa-gamepad';
                    cardColorClass = 'bg-green-100 dark:bg-green-900/30';
                } else if (item.tags.some(tag => tag.toLowerCase().includes('art') || tag.toLowerCase().includes('design'))) {
                    cardIcon = 'fa-paint-brush';
                    cardColorClass = 'bg-purple-100 dark:bg-purple-900/30';
                } else if (item.tags.some(tag => tag.toLowerCase().includes('robot') || tag.toLowerCase().includes('ai'))) {
                    cardIcon = 'fa-robot';
                    cardColorClass = 'bg-yellow-100 dark:bg-yellow-900/30';
                } else if (item.category.toLowerCase().includes('backend')) {
                    cardIcon = 'fa-server';
                    cardColorClass = 'bg-red-100 dark:bg-red-900/30';
                } else if (item.category.toLowerCase().includes('frontend')) {
                    cardIcon = 'fa-laptop';
                    cardColorClass = 'bg-blue-100 dark:bg-blue-900/30';
                } else if (item.category.toLowerCase().includes('learning')) {
                    cardIcon = 'fa-graduation-cap';
                    cardColorClass = 'bg-indigo-100 dark:bg-indigo-900/30';
                }
                
                // Add star rating based on popularity
                const stars = Array(Math.ceil(item.popularity * 5)).fill().map(() => 
                    '<i class="fa fa-star text-yellow-500"></i>'
                ).join('');
                
                // Add fun fact based on the item
                let funFact = '';
                if (item.name.toLowerCase() === 'react') funFact = 'Did you know React helps make cool animations?';
                else if (item.name.toLowerCase() === 'python') funFact = 'Python is named after the Monty Python comedy group!';
                else if (item.name.toLowerCase() === 'github') funFact = 'GitHub has over 100 million code projects!';
                else if (item.name.toLowerCase() === 'unity') funFact = 'Many popular games are made with Unity!';
                else if (item.name.toLowerCase() === 'docker') funFact = 'Docker helps keep code safe in little containers!';
                
                resultCard.innerHTML = `
                    <div class="md:flex">
                        <div class="md:w-1/4 ${cardColorClass} flex items-center justify-center p-6">
                            <div class="text-center">
                                <i class="fa ${cardIcon} text-5xl text-gray-700 dark:text-gray-300"></i>
                                <div class="mt-3 flex justify-center">
                                    ${stars}
                                </div>
                            </div>
                        </div>
                        <div class="p-5 md:w-3/4">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bubblegum text-xl font-bold text-gray-800 dark:text-white">${item.name}</h3>
                                <button class="text-gray-400 hover:text-accent transition-colors">
                                    <i class="fa fa-star-o"></i>
                                </button>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 font-nunito mb-3">Category: ${item.category}</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${item.tags.map(tag => 
                                    `<span class="text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full text-gray-600 dark:text-gray-300">${tag}</span>`
                                ).join('')}
                            </div>
                            ${funFact ? `
                            <div class="bg-accent/10 dark:bg-secondary/20 p-3 rounded-lg mb-4">
                                <p class="text-sm text-gray-700 dark:text-gray-300 font-comic">ðŸ§  ${funFact}</p>
                            </div>
                            ` : ''}
                            <div class="flex justify-between items-center">
                                <a href="/${item.file}" class="text-secondary dark:text-accent hover:underline font-medium flex items-center">
                                    Learn More <i class="fa fa-arrow-right ml-1"></i>
                                </a>
                                <button class="text-gray-400 hover:text-secondary dark:hover:text-accent transition-colors">
                                    <i class="fa fa-share-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(resultCard);
            });
        }
        
        // Update pagination controls
        function updatePagination() {
            const totalPages = Math.ceil(allResults.length / resultsPerPage);
            
            if (totalPages <= 1) {
                pagination.classList.add('hidden');
                return;
            }
            
            pagination.classList.remove('hidden');
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;
        }
        
        // Pagination event listeners
        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                displayPaginatedResults();
                updatePagination();
                scrollToResults();
            }
        });
        
        nextPageBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(allResults.length / resultsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                displayPaginatedResults();
                updatePagination();
                scrollToResults();
            }
        });
        
        // Scroll to results after pagination change
        function scrollToResults() {
            resultsHeading.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // Handle search tags
        searchTags.forEach(tag => {
            tag.addEventListener('click', () => {
                searchInput.value = tag.textContent.replace(/^\s*<i[^>]+><\/i>\s*/, '').trim();
                searchForm.dispatchEvent(new Event('submit'));
            });
        });
        
        // Initialize theme based on user preference
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        });
    </script>
</body>
</html>