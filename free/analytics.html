<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>免费网站流量统计工具大全 | 精选20款Web分析工具资源</title>
    <meta name="description" content="收录20款主流免费网站流量统计工具，涵盖隐私友好型、开源自托管、轻量级等多种类型，帮助网站管理员分析访问数据、优化用户体验。">
    
<!-- 外部资源引入 -->
<script src="https://cdn.tailwindcss.com"></script>
<script src="../assets/js/email-subscription.js"></script>
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36D399',
                        dark: '#0f172a',
                        card: '#1e293b',
                        muted: '#94a3b8',
                        accent: '#f97316',
                        danger: '#ef4444',
                        success: '#10b981',
                        selfhosted: '#8b5cf6', // 自托管类型颜色
                        privacy: '#ec4899',    // 隐私友好类型颜色
                        cloud: '#3b82f6'      // 云托管类型颜色
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['Fira Code', 'monospace']
                    },
                    boxShadow: {
                        'card': '0 4px 20px rgba(0, 0, 0, 0.15)',
                        'card-hover': '0 10px 30px rgba(22, 93, 255, 0.2)',
                    }
                },
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1;
            }
            .bg-gradient-analytics {
                background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .animate-fade-in {
                animation: fadeIn 0.5s ease-in-out;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .feature-badge {
                @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
            }
        }
    </style>
</head>
<body class="font-inter bg-gradient-analytics text-gray-200 min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-dark/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-800 transition-all duration-300">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <!-- Logo区域 -->
            <a href="#" class="flex items-center space-x-2 group">
                <i class="fa fa-bar-chart text-primary text-2xl group-hover:rotate-6 transition-transform duration-300"></i>
                <h1 class="text-xl md:text-2xl font-bold text-white">流量统计工具导航</h1>
            </a>
            
            <!-- 桌面端导航 -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="text-gray-300 hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:rounded-full after:transition-all hover:after:w-full">网站工具</a>
                <a href="#" class="text-primary font-medium relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-full after:bg-primary after:rounded-full">流量统计</a>
                <a href="#" class="text-gray-300 hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:rounded-full after:transition-all hover:after:w-full">使用教程</a>
                <a href="#" class="text-gray-300 hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:rounded-full after:transition-all hover:after:w-full">对比评测</a>
                <a href="#" class="text-gray-300 hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:rounded-full after:transition-all hover:after:w-full">资源下载</a>
                <a href="https://github.com/your-org/web-analytics" target="_blank" class="text-muted hover:text-primary transition-colors flex items-center group">
                    <i class="fa fa-github mr-1 group-hover:rotate-12 transition-transform duration-300"></i> GitHub
                </a>
            </div>
            
            <!-- 移动端菜单按钮 -->
            <button class="md:hidden text-gray-300 focus:outline-none" id="menuBtn">
                <i class="fa fa-bars text-xl transition-transform duration-300 hover:rotate-90"></i>
            </button>
        </div>
        
        <!-- 移动端导航菜单 -->
        <div class="md:hidden hidden bg-dark border-t border-gray-800" id="mobileMenu">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#" class="py-2 text-gray-300 hover:text-primary transition-colors">网站工具</a>
                <a href="#" class="py-2 text-primary font-medium">流量统计</a>
                <a href="#" class="py-2 text-gray-300 hover:text-primary transition-colors">使用教程</a>
                <a href="#" class="py-2 text-gray-300 hover:text-primary transition-colors">对比评测</a>
                <a href="#" class="py-2 text-gray-300 hover:text-primary transition-colors">资源下载</a>
                <a href="https://github.com/your-org/web-analytics" target="_blank" class="py-2 text-muted hover:text-primary transition-colors flex items-center">
                    <i class="fa fa-github mr-1"></i> GitHub
                </a>
            </div>
        </div>
    </header>

    <!-- 页面主体内容 -->
    <main class="container mx-auto px-4 py-8 md:py-12">
        <!-- 页面标题区 -->
        <header class="mb-10 md:mb-14">
            <div class="flex items-center mb-2 flex-wrap gap-3">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/20 text-primary mr-3">
                    <i class="fa fa-pie-chart mr-1"></i> 20款工具
                </span>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-privacy/20 text-privacy mr-3">
                    <i class="fa fa-shield mr-1"></i> 隐私友好
                </span>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-selfhosted/20 text-selfhosted mr-3">
                    <i class="fa fa-server mr-1"></i> 支持自托管
                </span>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/20 text-secondary">
                    <i class="fa fa-line-chart mr-1"></i> 数据分析
                </span>
                <span class="text-sm text-muted ml-auto">最后更新：2025-09-01</span>
            </div>
            <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-white mb-4 text-shadow">
                免费网站流量统计工具大全
            </h1>
            <p class="text-muted text-lg max-w-3xl">
                精选20款主流免费网站流量统计工具，涵盖隐私友好型、开源自托管、轻量级分析等多种类型，
                帮助网站管理员分析访问数据、了解用户行为、优化网站性能和用户体验。
            </p>
        </header>

        <!-- 筛选工具栏 -->
        <div class="bg-card rounded-xl p-4 mb-8 shadow-card border border-gray-800">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-grow relative">
                    <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-muted"></i>
                    <input id="q" type="search" placeholder="搜索工具名称 / 特点 / 类型..." 
                        class="w-full pl-10 pr-4 py-3 bg-dark border border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200 placeholder-muted">
                </div>
                <div class="flex gap-4 w-full md:w-auto">
                    <select id="category" 
                        class="flex-grow md:flex-grow-0 md:w-40 bg-dark border border-gray-700 rounded-lg px-4 py-3 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200 appearance-none bg-[url('data:image/svg+xml;charset=US-ASCII,<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\" fill=\"%2394a3b8\"/></svg>')] bg-no-repeat bg-right bg-center pr-8">
                        <option value="">按类型筛选</option>
                        <option>隐私友好型</option>
                        <option>开源自托管</option>
                        <option>云托管免费版</option>
                        <option>功能全面型</option>
                        <option>轻量级工具</option>
                    </select>
                    <select id="sort" 
                        class="flex-grow md:flex-grow-0 md:w-36 bg-dark border border-gray-700 rounded-lg px-4 py-3 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200 appearance-none bg-[url('data:image/svg+xml;charset=US-ASCII,<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\" fill=\"%2394a3b8\"/></svg>')] bg-no-repeat bg-right bg-center pr-8">
                        <option value="name">排序：名称</option>
                        <option value="popularity">排序：受欢迎度</option>
                    </select>
                </div>
            </div>
            <div class="stats text-muted text-sm mt-3" id="stats">载入中…</div>
        </div>

        <!-- 工具列表 -->
        <section id="list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- 加载状态指示器 -->
            <div id="loadingIndicator" class="col-span-full flex flex-col items-center justify-center py-16">
                <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"></div>
                <p class="text-muted">正在加载工具数据...</p>
            </div>
            
            <!-- 错误状态指示器 -->
            <div id="errorIndicator" class="col-span-full hidden flex-col items-center justify-center py-16">
                <i class="fa fa-exclamation-triangle text-danger text-3xl mb-4"></i>
                <p class="text-danger mb-2">加载数据时出错</p>
                <p class="text-muted mb-4">无法加载工具列表，请尝试刷新页面</p>
                <button id="retryBtn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-colors">
                    重试加载
                </button>
            </div>
        </section>

        <!-- 工具选择指南卡片 -->
        <div class="mt-12 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-xl p-5 border border-primary/30">
            <div class="flex">
                <div class="flex-shrink-0 mr-4 mt-1">
                    <i class="fa fa-book text-primary text-2xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">网站流量统计工具选择指南</h3>
                    <p class="text-gray-300 mb-3">
                        选择合适的网站流量统计工具需要考虑以下因素：
                    </p>
                    <ul class="text-gray-300 space-y-2 mb-3 list-disc pl-5">
                        <li>隐私合规要求高：优先选择 Plausible、Umami、GoatCounter 等隐私友好型工具</li>
                        <li>技术能力强且需要数据控制权：选择可自托管的 Umami、Matomo、Ackee</li>
                        <li>新手用户且需要简单易用：选择 Fathom Analytics、Clicky</li>
                        <li>需要全面功能且不介意隐私限制：Google Analytics 免费版</li>
                        <li>产品分析需求：PostHog、Mixpanel 免费版</li>
                    </ul>
                    <p class="text-gray-300">
                        同时需考虑网站规模、流量大小、团队技术能力以及是否需要长期保存历史数据等因素。
                    </p>
                </div>
            </div>
        </div>

        <!-- 工具选择助手 -->
        <div class="mt-8 bg-card rounded-xl p-5 border border-gray-800 shadow-card">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="fa fa-sitemap text-secondary mr-2"></i> 统计工具选择助手
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-gray-300 mb-1">你的隐私需求？</label>
                    <select id="privacyNeed" class="w-full bg-dark border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200">
                        <option value="">请选择隐私需求</option>
                        <option value="high">高（需符合GDPR等隐私法规）</option>
                        <option value="medium">中（基本隐私保护）</option>
                        <option value="low">低（功能优先）</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm text-gray-300 mb-1">部署方式偏好？</label>
                    <select id="deployPref" class="w-full bg-dark border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200">
                        <option value="">请选择部署方式</option>
                        <option value="selfhosted">自托管（自己服务器）</option>
                        <option value="cloud">云托管（第三方服务）</option>
                        <option value="any">无所谓</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm text-gray-300 mb-1">网站规模？</label>
                    <select id="siteScale" class="w-full bg-dark border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200">
                        <option value="">请选择网站规模</option>
                        <option value="small">小型（日访问量<1000）</option>
                        <option value="medium">中型（日访问量1000-10000）</option>
                        <option value="large">大型（日访问量>10000）</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm text-gray-300 mb-1">功能需求？</label>
                    <select id="featureNeed" class="w-full bg-dark border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-200">
                        <option value="">请选择功能需求</option>
                        <option value="basic">基础统计（访客数、来源等）</option>
                        <option value="advanced">高级分析（用户行为、转化等）</option>
                        <option value="product">产品分析（事件追踪、漏斗等）</option>
                    </select>
                </div>
            </div>
            <div class="mt-4">
                <button id="recommendBtn" class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-lg transition-colors">
                    <i class="fa fa-lightbulb-o mr-1"></i> 获取推荐工具
                </button>
            </div>
            <div id="recommendationResult" class="mt-4 hidden">
                <div class="p-3 rounded-lg border" id="recommendationContent"></div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark border-t border-gray-800 mt-16 py-10">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa fa-bar-chart text-primary text-2xl"></i>
                        <h2 class="text-xl font-bold text-white">流量统计工具导航</h2>
                    </div>
                    <p class="text-muted text-sm">
                        精选高质量免费网站流量统计工具，帮助网站管理员了解访客行为，
                        优化网站体验，提升流量转化，保护用户隐私。
                    </p>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-4 text-white">快速链接</h3>
                    <ul class="space-y-2 text-muted">
                        <li><a href="#" class="hover:text-primary transition-colors"><i class="fa fa-angle-right mr-1"></i> 网站工具</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors"><i class="fa fa-angle-right mr-1"></i> 流量统计</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors"><i class="fa fa-angle-right mr-1"></i> 使用教程</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors"><i class="fa fa-angle-right mr-1"></i> 对比评测</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors"><i class="fa fa-angle-right mr-1"></i> 联系我们</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-4 text-white">关注我们</h3>
                    <div class="flex space-x-4 mb-4">
                        <a href="https://github.com/your-org/web-analytics" target="_blank" class="text-muted hover:text-primary transition-colors text-xl hover:scale-110 transform duration-300">
                            <i class="fa fa-github"></i>
                        </a>
                        <a href="#" class="text-muted hover:text-primary transition-colors text-xl hover:scale-110 transform duration-300">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="text-muted hover:text-primary transition-colors text-xl hover:scale-110 transform duration-300">
                            <i class="fa fa-linkedin"></i>
                        </a>
                        <a href="#" class="text-muted hover:text-primary transition-colors text-xl hover:scale-110 transform duration-300">
                            <i class="fa fa-telegram"></i>
                        </a>
                    </div>
                    <p class="text-muted text-sm">
                        订阅获取最新网站分析工具与使用技巧
                    </p>
                    <form id="footerSubscribeForm" class="mt-3 flex">
                        <input type="email" id="subscribe-email" placeholder="您的邮箱地址" 
                            class="px-3 py-2 rounded-l-lg text-gray-200 bg-card border border-gray-700 flex-grow text-sm focus:outline-none focus:ring-2 focus:ring-primary">
                        <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-3 py-2 rounded-r-lg transition-colors">
                            订阅
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-6 text-center text-muted text-sm">
                <p>© 2025 流量统计工具导航 | 仅供合法用途与技术研究使用</p>
            </div>
        </div>
    </footer>

    <!-- 回到顶部按钮 -->
    <button id="backToTop" class="fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 opacity-0 invisible hover:scale-110 z-40">
        <i class="fa fa-chevron-up"></i>
    </button>

    <!-- 页面交互逻辑 -->
    <script>
        // 网站流量统计工具数据
        const ANALYTICS_TOOLS = [
            {
                id: 1,
                name: "Plausible Analytics",
                url: "https://plausible.io/",
                type: ["隐私友好型", "云托管免费版", "轻量级工具"],
                popularity: 8.8,
                description: "轻量级、隐私友好的网站流量统计工具，无需 cookies，符合 GDPR 等隐私法规，界面简洁直观。",
                缺点: "免费版功能有限，历史数据存储周期短，高级功能需付费订阅。",
                comments: [
                    "比 Google Analytics 简单，隐私保护好，适合注重合规的网站。",
                    "功能不够全面，只有基础统计，高级分析需要付费。"
                ],
                features: ["无 cookies", "实时统计", "访问来源分析", "页面浏览统计"],
                bestFor: "注重隐私合规的中小型网站，博客和个人网站"
            },
            {
                id: 2,
                name: "Umami",
                url: "https://umami.is/",
                type: ["隐私友好型", "开源自托管", "轻量级工具"],
                popularity: 8.5,
                description: "开源网站分析工具，可自托管，轻量且注重隐私，数据完全由自己控制，部署简单。",
                缺点: "需要自己搭建服务器，初期配置略复杂，技术门槛相对较高。",
                comments: [
                    "轻量快速，隐私友好，数据自己掌控，不用担心第三方共享。",
                    "自托管需要一定技术，文档虽然不错但新手仍需学习。"
                ],
                features: ["开源代码", "可自托管", "隐私保护", "多网站支持"],
                bestFor: "有技术能力的开发者，注重数据隐私和控制权的网站"
            },
            {
                id: 3,
                name: "Fathom Analytics",
                url: "https://usefathom.com/",
                type: ["隐私友好型", "云托管免费版", "轻量级工具"],
                popularity: 8.2,
                description: "简单的隐私统计工具，免费版支持小型网站，界面简洁美观，符合隐私法规要求。",
                缺点: "免费版访问量有限制（每月10,000次页面浏览），高级功能需付费。",
                comments: [
                    "UI 简洁，入门容易，隐私保护做得好，适合小型网站使用。",
                    "访问量大的网站要付费，价格对个人站长略高。"
                ],
                features: ["隐私合规", "简单易用", "实时数据", "无广告跟踪"],
                bestFor: "小型网站，个人博客，注重隐私和简洁性的用户"
            },
            {
                id: 4,
                name: "GoatCounter",
                url: "https://www.goatcounter.com/",
                type: ["隐私友好型", "开源自托管", "云托管免费版", "轻量级工具"],
                popularity: 7.8,
                description: "开源网站分析工具，可托管或自托管，轻量且隐私友好，无需 JavaScript 也能工作。",
                缺点: "免费托管版每日访问量有限制（最多1000次访问），功能相对简单。",
                comments: [
                    "非常轻量，适合小型网站，甚至可以在没有 JavaScript 的情况下使用。",
                    "流量多了就得付费，界面比较朴素，功能不算丰富。"
                ],
                features: ["开源免费", "轻量级", "无JS支持", "隐私保护"],
                bestFor: "极简主义者，轻量网站，对加载速度有高要求的站点"
            },
            {
                id: 5,
                name: "Ackee",
                url: "https://ackee.electerious.com/",
                type: ["隐私友好型", "开源自托管"],
                popularity: 7.2,
                description: "自托管开源网站分析工具，注重数据隐私，界面简洁现代，支持多网站统计。",
                缺点: "必须自托管，需要 Node.js 环境，缺乏详细的用户行为分析功能。",
                comments: [
                    "界面简洁，支持实时统计，数据完全私有，适合技术型用户。",
                    "配置需要一定技术门槛，文档不够完善，功能相对基础。"
                ],
                features: ["开源代码", "自托管", "隐私优先", "实时数据"],
                bestFor: "有服务器管理经验的开发者，注重隐私和简洁界面的用户"
            },
            {
                id: 6,
                name: "Simple Analytics",
                url: "https://simpleanalytics.com/",
                type: ["隐私友好型", "云托管免费版"],
                popularity: 7.0,
                description: "隐私友好型网站分析，免费试用14天，之后需付费订阅，界面简洁直观。",
                缺点: "免费期结束需付费，没有永久免费方案，价格相对较高。",
                comments: [
                    "简单易用，隐私保护到位，数据展示清晰，适合非技术用户。",
                    "免费期结束后需付费，对于个人网站来说性价比不高。"
                ],
                features: ["隐私合规", "简洁界面", "实时统计", "访问来源分析"],
                bestFor: "注重隐私的商业网站，愿意为优质服务付费的用户"
            },
            {
                id: 7,
                name: "Open Web Analytics (OWA)",
                url: "http://www.openwebanalytics.com/",
                type: ["开源自托管", "功能全面型"],
                popularity: 6.5,
                description: "开源网站分析软件，可自托管，功能接近 Google Analytics，高度可定制。",
                缺点: "界面较老，安装配置麻烦，缺乏现代UI设计，社区活跃度一般。",
                comments: [
                    "开源功能强大，可定制性高，能满足复杂分析需求。",
                    "配置复杂，新手不太容易上手，界面需要更新。"
                ],
                features: ["开源免费", "自托管", "功能全面", "可定制"],
                bestFor: "有技术能力的团队，需要定制化分析功能的网站"
            },
            {
                id: 8,
                name: "Matomo",
                url: "https://matomo.org/",
                type: ["开源自托管", "功能全面型"],
                popularity: 8.7,
                description: "开源网站分析工具，可自托管，功能强大，常被视为 Google Analytics 的开源替代品。",
                缺点: "服务器资源要求高，免费托管版功能受限，界面相对复杂。",
                comments: [
                    "功能齐全，可替代 GA，数据完全掌控，合规性好。",
                    "自托管服务器成本高，资源占用大，对小网站不太友好。"
                ],
                features: ["开源代码", "自托管", "功能全面", "隐私合规"],
                bestFor: "中大型网站，需要全面分析功能且注重数据所有权的组织"
            },
            {
                id: 9,
                name: "Countly Community Edition",
                url: "https://count.ly/",
                type: ["开源自托管", "功能全面型"],
                popularity: 7.6,
                description: "开源移动与网站分析平台，自托管免费版提供核心统计功能，支持多平台数据收集。",
                缺点: "高级功能需企业版，安装配置复杂，学习曲线陡峭。",
                comments: [
                    "功能很丰富，适合移动与网站分析一体化需求，开源免费。",
                    "免费版部分功能受限，文档不够清晰，配置需要技术能力。"
                ],
                features: ["开源免费", "多平台支持", "用户行为分析", "事件追踪"],
                bestFor: "同时拥有网站和移动应用的开发者，需要统一分析平台的团队"
            },
            {
                id: 10,
                name: "PostHog",
                url: "https://posthog.com/",
                type: ["开源自托管", "功能全面型", "产品分析"],
                popularity: 7.9,
                description: "开源产品分析工具，提供行为分析、热图等功能，适合产品经理和开发者使用。",
                缺点: "自托管免费版功能有限，高级功能需付费，资源占用较大。",
                comments: [
                    "功能强大，适合产品分析，事件追踪和漏斗分析很实用。",
                    "自托管部署麻烦，对服务器配置要求高，新手不易上手。"
                ],
                features: ["开源代码", "产品分析", "热图功能", "漏斗分析"],
                bestFor: "产品团队，需要深入用户行为分析的 web 应用"
            },
            {
                id: 11,
                name: "SimpleStats",
                url: "https://simplestats.io/",
                type: ["隐私友好型", "云托管免费版", "轻量级工具"],
                popularity: 6.0,
                description: "轻量级隐私友好统计工具，免费方案支持小流量网站，无需 cookies，易于设置。",
                缺点: "功能有限，数据存储周期短（仅30天），不支持高级分析。",
                comments: [
                    "入门容易，隐私好，设置简单，加载速度快不影响网站性能。",
                    "不适合大流量网站，功能太基础，数据保留时间短。"
                ],
                features: ["隐私保护", "轻量级", "易于设置", "实时统计"],
                bestFor: "小型个人网站，博客，对统计需求简单的用户"
            },
            {
                id: 12,
                name: "StatCounter",
                url: "https://statcounter.com/",
                type: ["云托管免费版", "轻量级工具"],
                popularity: 7.5,
                description: "提供免费基础网站统计，可查看访客、流量来源等，历史悠久，使用广泛。",
                缺点: "免费版功能受限，历史数据保留短（仅30天），界面较老旧。",
                comments: [
                    "功能基本够用，使用简单，适合新手，免费版就能满足基础需求。",
                    "历史数据少，免费版限制明显，界面需要更新，有广告。"
                ],
                features: ["易于使用", "实时统计", "访客跟踪", "流量来源分析"],
                bestFor: "新手用户，小型网站，需要简单直观的统计数据的站长"
            },
            {
                id: 13,
                name: "Clicky",
                url: "https://clicky.com/",
                type: ["云托管免费版", "轻量级工具"],
                popularity: 7.3,
                description: "轻量网站流量统计，免费版支持小流量网站，提供实时数据和基础分析功能。",
                缺点: "免费版仅支持一个网站，流量限制严格，高级功能需付费。",
                comments: [
                    "入门易用，实时数据不错，界面简洁，适合监控小型网站。",
                    "免费版网站数量有限，流量稍大就需要付费，价格偏高。"
                ],
                features: ["实时统计", "访客跟踪", "页面分析", "目标转化"],
                bestFor: "个人网站，博客，需要实时监控流量的小型站点"
            },
            {
                id: 14,
                name: "Google Analytics Free",
                url: "https://analytics.google.com/",
                type: ["云托管免费版", "功能全面型"],
                popularity: 9.0,
                description: "功能最强大的免费流量分析工具，提供全面统计，集成 Google 生态系统，社区支持丰富。",
                缺点: "隐私保护一般，配置复杂，界面臃肿，学习曲线陡峭。",
                comments: [
                    "功能强大到无与伦比，几乎能满足所有分析需求，文档和教程丰富。",
                    "界面复杂，新手容易迷路，隐私争议大，GDPR合规需额外配置。"
                ],
                features: ["功能全面", "自定义报告", "电子商务分析", "用户行为跟踪"],
                bestFor: "各类网站，尤其是需要深入分析和不介意数据共享的用户"
            },
            {
                id: 15,
                name: "Mixpanel Free Tier",
                url: "https://mixpanel.com/",
                type: ["云托管免费版", "功能全面型", "产品分析"],
                popularity: 8.0,
                description: "用户行为分析平台，免费版支持有限事件量，适合分析用户交互和转化漏斗。",
                缺点: "事件数有限制（每月100万事件），高级功能付费，学习曲线陡峭。",
                comments: [
                    "分析深度很好，漏斗分析和用户分群功能强大，适合产品优化。",
                    "免费版有事件量限制，对于活跃网站很快就会超限，价格不便宜。"
                ],
                features: ["用户行为分析", "漏斗分析", "事件追踪", "留存分析"],
                bestFor: "产品团队，SaaS应用，需要深入用户行为分析的网站"
            }
        ];

        // DOM元素引用
        const listEl = document.getElementById('list');
        const statsEl = document.getElementById('stats');
        const qEl = document.getElementById('q');
        const categoryEl = document.getElementById('category');
        const sortEl = document.getElementById('sort');
        const menuBtn = document.getElementById('menuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const backToTopBtn = document.getElementById('backToTop');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const errorIndicator = document.getElementById('errorIndicator');
        const retryBtn = document.getElementById('retryBtn');
        const recommendBtn = document.getElementById('recommendBtn');
        const recommendationResult = document.getElementById('recommendationResult');
        const recommendationContent = document.getElementById('recommendationContent');
        const privacyNeed = document.getElementById('privacyNeed');
        const deployPref = document.getElementById('deployPref');
        const siteScale = document.getElementById('siteScale');
        const featureNeed = document.getElementById('featureNeed');

        // 获取类型对应的颜色类
        function getTypeColor(type) {
            if (type === '隐私友好型') return 'privacy';
            if (type === '开源自托管') return 'selfhosted';
            if (type === '云托管免费版') return 'cloud';
            if (type === '功能全面型') return 'primary';
            if (type === '轻量级工具') return 'secondary';
            if (type === '产品分析') return 'accent';
            return 'primary';
        }

        // 渲染工具列表
        function render(items) {
            try {
                // 隐藏加载和错误指示器
                loadingIndicator.classList.add('hidden');
                errorIndicator.classList.add('hidden');
                
                // 清空列表
                listEl.innerHTML = '';
                
                // 添加新项并应用动画
                items.forEach((it, index) => {
                    const card = document.createElement('article');
                    card.className = `bg-card rounded-xl p-5 border border-gray-800 shadow-card card-hover animate-fade-in`;
                    card.style.animationDelay = `${index * 30}ms`;
                    card.dataset.name = it.name.toLowerCase();
                    card.dataset.type = it.type.join(' ').toLowerCase();
                    card.dataset.features = it.features.join(' ').toLowerCase();
                    
                    // 构建类型标签
                    const typeTags = it.type.map(type => {
                        const colorClass = getTypeColor(type);
                        return `<span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-${colorClass}/20 text-${colorClass} mr-2 mb-2">
                            ${type}
                        </span>`;
                    }).join('');
                    
                    // 构建星级评分（受欢迎度）
                    const popularityHtml = [];
                    for (let i = 1; i <= 10; i++) {
                        if (i <= Math.floor(it.popularity)) {
                            popularityHtml.push('<i class="fa fa-star text-yellow-500"></i>');
                        } else if (i - it.popularity <= 0.5) {
                            popularityHtml.push('<i class="fa fa-star-half-o text-yellow-500"></i>');
                        } else {
                            popularityHtml.push('<i class="fa fa-star-o text-yellow-500"></i>');
                        }
                    }
                    
                    // 构建功能列表
                    const featuresHtml = it.features.map(feature => {
                        return `<li class="flex items-center text-xs text-gray-300 mr-2 mb-1 inline-flex">
                            <i class="fa fa-check text-secondary mr-1"></i> ${feature}
                        </li>`;
                    }).join('');
                    
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-semibold text-white">${it.name}</h3>
                            <div class="flex flex-col items-end">
                                <div class="flex mb-1">
                                    ${popularityHtml.join('')}
                                </div>
                                <span class="text-xs text-muted">${it.popularity.toFixed(1)}/10</span>
                            </div>
                        </div>
                        
                        <div class="mb-3 flex flex-wrap">
                            ${typeTags}
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center text-xs text-muted mb-1">
                                <i class="fa fa-info-circle mr-1 text-secondary"></i>简介
                            </div>
                            <p class="text-gray-300 text-sm">${it.description}</p>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center text-xs text-muted mb-1">
                                <i class="fa fa-exclamation-triangle mr-1 text-accent"></i>缺点
                            </div>
                            <p class="text-gray-300 text-sm">${it.缺点}</p>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center text-xs text-muted mb-1">
                                <i class="fa fa-check-square-o mr-1 text-secondary"></i>主要功能
                            </div>
                            <div class="flex flex-wrap">
                                ${featuresHtml}
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center text-xs text-muted mb-1">
                                <i class="fa fa-users mr-1 text-secondary"></i>最适合
                            </div>
                            <p class="text-gray-300 text-sm">${it.bestFor}</p>
                        </div>
                        
                        <div class="mb-4">
                            <div class="flex items-center text-xs text-muted mb-1">
                                <i class="fa fa-comments mr-1 text-secondary"></i>用户评论
                            </div>
                            <ul class="space-y-1 text-gray-300 text-sm">
                                ${it.comments.map(comment => `
                                    <li class="flex items-start">
                                        <i class="fa fa-quote-left text-xs text-muted mt-1 mr-2"></i>
                                        <span>${comment}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <a href="${it.url}" target="_blank" rel="noopener" class="inline-flex items-center text-primary hover:text-primary/80 text-sm transition-colors">
                            <i class="fa fa-external-link mr-1 text-xs"></i> 访问官网
                        </a>
                    `;
                    
                    listEl.appendChild(card);
                });
                
                // 更新统计信息
                statsEl.textContent = `共 ${items.length} 款工具`;
            } catch (error) {
                console.error('渲染工具列表时出错:', error);
                showErrorState();
            }
        }

        // 应用筛选和排序
        function applyFilters() {
            try {
                // 显示加载状态
                loadingIndicator.classList.remove('hidden');
                errorIndicator.classList.add('hidden');
                
                const query = qEl.value.trim().toLowerCase();
                const category = categoryEl.value;
                
                // 筛选
                let filtered = ANALYTICS_TOOLS.filter(item => {
                    // 搜索匹配
                    const matchesQuery = !query || 
                        item.name.toLowerCase().includes(query) ||
                        item.type.some(t => t.toLowerCase().includes(query)) ||
                        item.description.toLowerCase().includes(query) ||
                        item.缺点.toLowerCase().includes(query) ||
                        item.comments.some(comment => comment.toLowerCase().includes(query)) ||
                        item.features.some(feature => feature.toLowerCase().includes(query));
                    
                    // 类别匹配
                    const matchesCategory = !category || item.type.includes(category);
                    
                    return matchesQuery && matchesCategory;
                });
                
                // 排序
                const sortBy = sortEl.value;
                filtered.sort((a, b) => {
                    if (sortBy === "popularity") {
                        // 按受欢迎度降序排序
                        return b.popularity - a.popularity;
                    } else {
                        // 按名称排序
                        return a.name.localeCompare(b.name);
                    }
                });
                
                // 短暂延迟以展示加载状态
                setTimeout(() => {
                    render(filtered);
                }, 300);
                
            } catch (error) {
                console.error('筛选工具时出错:', error);
                showErrorState();
            }
        }

        // 推荐统计工具
        function recommendAnalyticsTool() {
            const privacy = privacyNeed.value;
            const deploy = deployPref.value;
            const scale = siteScale.value;
            const feature = featureNeed.value;
            
            // 验证是否填写了必要信息
            if (!privacy || !deploy || !scale || !feature) {
                recommendationContent.className = 'p-3 rounded-lg border border-danger/50 bg-danger/10';
                recommendationContent.innerHTML = `<div class="flex items-center"><i class="fa fa-exclamation-circle text-danger mr-2"></i> <span>请填写所有选项以获取推荐</span></div>`;
                recommendationResult.classList.remove('hidden');
                return;
            }
            
            // 根据选择生成推荐
            let recommendations = [];
            
            // 高隐私需求
            if (privacy === 'high') {
                if (deploy === 'selfhosted') {
                    recommendations.push("Umami 或 Matomo");
                } else if (deploy === 'cloud') {
                    if (scale === 'small') {
                        recommendations.push("Plausible Analytics 或 Fathom Analytics");
                    } else {
                        recommendations.push("Plausible Analytics（付费版）");
                    }
                } else { // any
                    recommendations.push("Umami（自托管）或 Plausible Analytics（云托管）");
                }
            }
            // 中等隐私需求
            else if (privacy === 'medium') {
                if (feature === 'advanced') {
                    recommendations.push("Matomo");
                } else {
                    if (deploy === 'selfhosted') {
                        recommendations.push("Umami 或 GoatCounter");
                    } else {
                        recommendations.push("Fathom Analytics 或 GoatCounter");
                    }
                }
            }
            // 低隐私需求（功能优先）
            else {
                if (feature === 'advanced' || feature === 'product') {
                    recommendations.push("Google Analytics 免费版");
                    if (feature === 'product') recommendations.push("或 Mixpanel 免费版");
                } else {
                    if (scale === 'large') {
                        recommendations.push("Google Analytics 免费版");
                    } else {
                        recommendations.push("StatCounter 或 Clicky");
                    }
                }
            }
            
            // 补充说明
            if (scale === 'large' && privacy === 'high') {
                recommendations.push("注意：高流量网站的隐私友好型分析工具通常需要付费方案");
            }
            
            // 显示推荐结果
            recommendationContent.className = 'p-3 rounded-lg border border-success/50 bg-success/10';
            recommendationContent.innerHTML = `
                <div class="flex items-center mb-2"><i class="fa fa-lightbulb-o text-success mr-2"></i> <span>为您推荐的流量统计工具：</span></div>
                <ul class="list-disc pl-5 space-y-1">
                    ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                </ul>
            `;
            recommendationResult.classList.remove('hidden');
        }

        // 显示错误状态
        function showErrorState() {
            loadingIndicator.classList.add('hidden');
            errorIndicator.classList.remove('hidden');
            statsEl.textContent = `加载失败`;
            statsEl.classList.add('text-danger');
        }

        // 移动端菜单切换
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            if (!mobileMenu.classList.contains('hidden')) {
                mobileMenu.style.maxHeight = '0';
                setTimeout(() => {
                    mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
                }, 10);
            } else {
                mobileMenu.style.maxHeight = '0';
            }
        });
        
        mobileMenu.style.overflow = 'hidden';
        mobileMenu.style.transition = 'max-height 0.3s ease-out';

        // 回到顶部按钮
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.remove('opacity-0', 'invisible');
                backToTopBtn.classList.add('opacity-100', 'visible');
            } else {
                backToTopBtn.classList.add('opacity-0', 'invisible');
                backToTopBtn.classList.remove('opacity-100', 'visible');
            }

            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('py-2', 'shadow-md');
                header.classList.remove('py-4', 'shadow-sm');
            } else {
                header.classList.add('py-4', 'shadow-sm');
                header.classList.remove('py-2', 'shadow-md');
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // 绑定筛选事件
        qEl.addEventListener('input', applyFilters);
        categoryEl.addEventListener('change', applyFilters);
        sortEl.addEventListener('change', applyFilters);

        // 重试按钮事件
        retryBtn.addEventListener('click', applyFilters);

        // 推荐按钮事件
        recommendBtn.addEventListener('click', recommendAnalyticsTool);

        // 外部链接提示
        document.addEventListener('click', (e) => {
            const link = e.target.closest('a[target="_blank"]');
            if (link) {
                const confirmLeave = confirm('即将跳转到外部网站，是否继续？');
                if (!confirmLeave) {
                    e.preventDefault();
                }
            }
        });

        // 初始化页面
        function initializePage() {
            try {
                // 确保DOM完全加载
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', applyFilters);
                } else {
                    // 立即执行筛选和渲染
                    applyFilters();
                }
            } catch (error) {
                console.error('页面初始化失败:', error);
                showErrorState();
            }
        }

        // 启动页面初始化
        initializePage();
    </script>
<script type="module" src="/main.js"></script>
</body>
</html>
